apiVersion: v1
kind: Namespace
metadata:
  name: swissbrain
  labels:
    name: swissbrain
    environment: production
    team: swissbrain-ai
    cost-center: engineering

---
# Resource Quota - limits total resource consumption in the namespace
apiVersion: v1
kind: ResourceQuota
metadata:
  name: swissbrain-quota
  namespace: swissbrain
spec:
  hard:
    # Compute resources
    requests.cpu: "20"
    requests.memory: 40Gi
    requests.storage: 100Gi
    limits.cpu: "40"
    limits.memory: 80Gi

    # Object counts
    pods: "50"
    services: "20"
    configmaps: "50"
    secrets: "50"
    persistentvolumeclaims: "20"

    # Storage classes
    requests.storage: 100Gi
    persistentvolumeclaims: "20"

---
# LimitRange - sets default limits and constraints for pods/containers
apiVersion: v1
kind: LimitRange
metadata:
  name: swissbrain-limits
  namespace: swissbrain
spec:
  limits:
    # Container limits
    - type: Container
      max:
        cpu: "4"
        memory: 8Gi
        ephemeral-storage: 10Gi
      min:
        cpu: 10m
        memory: 64Mi
        ephemeral-storage: 100Mi
      default:
        cpu: 500m
        memory: 1Gi
        ephemeral-storage: 2Gi
      defaultRequest:
        cpu: 100m
        memory: 256Mi
        ephemeral-storage: 1Gi
      maxLimitRequestRatio:
        cpu: "4"
        memory: "4"

    # Pod limits
    - type: Pod
      max:
        cpu: "8"
        memory: 16Gi
        ephemeral-storage: 20Gi
      min:
        cpu: 10m
        memory: 64Mi
        ephemeral-storage: 100Mi

    # PVC limits
    - type: PersistentVolumeClaim
      max:
        storage: 50Gi
      min:
        storage: 1Gi
