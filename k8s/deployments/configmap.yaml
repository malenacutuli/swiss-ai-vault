apiVersion: v1
kind: ConfigMap
metadata:
  name: sandbox-executor-config
  namespace: swissbrain
  labels:
    app: sandbox-executor
data:
  # Application configuration
  PORT: "8000"
  HOST: "0.0.0.0"
  NODE_ENV: "production"
  LOG_LEVEL: "info"
  LOG_FORMAT: "json"

  # Resource limits
  MAX_EXECUTION_TIME: "300s"
  MAX_MEMORY: "2Gi"
  MAX_CPU: "1000m"

  # Feature flags
  ENABLE_METRICS: "true"
  ENABLE_TRACING: "false"
  ENABLE_DEBUG: "false"

  # Timeout configuration
  REQUEST_TIMEOUT: "30s"
  CONNECTION_TIMEOUT: "10s"
  KEEPALIVE_TIMEOUT: "60s"

  # Rate limiting
  RATE_LIMIT_ENABLED: "true"
  RATE_LIMIT_MAX_REQUESTS: "1000"
  RATE_LIMIT_WINDOW: "60s"

  # Health check configuration
  HEALTH_CHECK_INTERVAL: "10s"
  HEALTH_CHECK_TIMEOUT: "5s"

  # Application configuration file (if needed)
  config.yaml: |
    server:
      port: 8000
      host: 0.0.0.0
      timeout: 30s

    logging:
      level: info
      format: json

    resources:
      max_execution_time: 300s
      max_memory: 2Gi
      max_cpu: 1000m

    monitoring:
      enabled: true
      metrics_port: 9090
      tracing_enabled: false

    security:
      enable_sandbox: true
      allow_network: false
      read_only_filesystem: true
